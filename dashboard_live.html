<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta http-equiv="refresh" content="30">
<title>镍/不锈钢研究看板</title>
<script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
<link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;600&family=Noto+Sans+SC:wght@400;500;700;900&display=swap" rel="stylesheet">
<style>
:root {
    --bg: #0a0e17;
    --card: #111827;
    --card-hover: #1a2235;
    --border: #1e293b;
    --text: #e2e8f0;
    --text-secondary: #94a3b8;
    --text-muted: #64748b;
    --green: #22c55e;
    --red: #ef4444;
    --amber: #f59e0b;
    --blue: #38bdf8;
    --purple: #a78bfa;
}
* { margin:0; padding:0; box-sizing:border-box; }
body {
    font-family: 'Noto Sans SC', sans-serif;
    background: var(--bg);
    color: var(--text);
    min-height: 100vh;
}
.container { max-width: 1400px; margin: 0 auto; padding: 24px; }

/* Header */
header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 24px;
    padding-bottom: 16px;
    border-bottom: 1px solid var(--border);
}
h1 {
    font-size: 26px;
    font-weight: 900;
    background: linear-gradient(135deg, #e2e8f0, #38bdf8);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
}
.live-badge {
    display: inline-flex;
    align-items: center;
    gap: 6px;
    font-size: 11px;
    font-weight: 500;
    color: var(--green);
    background: rgba(34,197,94,0.1);
    padding: 4px 12px;
    border-radius: 20px;
    margin-left: 12px;
}
.live-badge .dot {
    width: 8px; height: 8px;
    background: var(--green);
    border-radius: 50%;
    animation: pulse 1.5s infinite;
}
@keyframes pulse {
    0%,100% { opacity:1; transform:scale(1); }
    50% { opacity:0.4; transform:scale(0.8); }
}
.update-time {
    font-family: 'JetBrains Mono', monospace;
    font-size: 12px;
    color: var(--text-muted);
}

/* Realtime Cards */
.realtime-section {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
    gap: 20px;
    margin-bottom: 24px;
}
.realtime-card {
    background: var(--card);
    border: 1px solid var(--border);
    border-radius: 16px;
    padding: 20px;
    position: relative;
    overflow: hidden;
}
.realtime-card::before {
    content: '';
    position: absolute;
    top: 0; left: 0; right: 0;
    height: 4px;
}
.realtime-card.up::before { background: linear-gradient(90deg, var(--green), transparent); }
.realtime-card.down::before { background: linear-gradient(90deg, var(--red), transparent); }
.card-header {
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    margin-bottom: 16px;
}
.card-name { font-size: 20px; font-weight: 700; }
.card-code { font-family: 'JetBrains Mono', monospace; font-size: 11px; color: var(--text-muted); margin-top: 2px; }
.card-price-wrap { text-align: right; }
.price {
    font-family: 'JetBrains Mono', monospace;
    font-size: 36px;
    font-weight: 600;
    letter-spacing: -1px;
}
.change {
    font-family: 'JetBrains Mono', monospace;
    font-size: 14px;
    margin-top: 2px;
}
.change.up { color: var(--green); }
.change.down { color: var(--red); }
.card-metrics {
    display: grid;
    grid-template-columns: repeat(8, 1fr);
    gap: 8px;
    padding-top: 12px;
    border-top: 1px solid var(--border);
}
.metric { text-align: center; }
.metric .label { font-size: 10px; color: var(--text-muted); margin-bottom: 2px; }
.metric .value { font-family: 'JetBrains Mono', monospace; font-size: 12px; }
.metric .value.up { color: var(--green); }
.metric .value.down { color: var(--red); }

/* Alerts */
.alerts-section {
    background: var(--card);
    border: 1px solid var(--border);
    border-radius: 12px;
    padding: 16px;
    margin-bottom: 24px;
}
.alerts-section h3 {
    font-size: 13px;
    font-weight: 600;
    color: var(--text-secondary);
    margin-bottom: 10px;
}
.alert-item {
    display: flex;
    align-items: center;
    gap: 12px;
    padding: 6px 10px;
    border-radius: 6px;
    font-size: 12px;
    margin-bottom: 4px;
}
.alert-item.high { background: rgba(239,68,68,0.1); border-left: 3px solid var(--red); }
.alert-item.medium { background: rgba(245,158,11,0.1); border-left: 3px solid var(--amber); }
.alert-time { font-family: 'JetBrains Mono', monospace; font-size: 10px; color: var(--text-muted); }
.alert-name { font-weight: 600; min-width: 70px; }
.alert-msg { color: var(--text-secondary); }
.no-alerts { color: var(--text-muted); font-size: 12px; text-align: center; padding: 10px; }

/* Charts */
.charts-section { margin-bottom: 24px; }
.section-title {
    font-size: 14px;
    font-weight: 600;
    color: var(--text-secondary);
    margin-bottom: 16px;
    display: flex;
    align-items: center;
    gap: 8px;
}
.section-title::before {
    content: '';
    width: 3px; height: 14px;
    background: var(--blue);
    border-radius: 2px;
}
.charts-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(500px, 1fr));
    gap: 20px;
}
.chart-box {
    background: var(--card);
    border: 1px solid var(--border);
    border-radius: 12px;
    padding: 16px;
}
.chart-box h4 {
    font-size: 13px;
    font-weight: 500;
    color: var(--text-secondary);
    margin-bottom: 12px;
}
.chart-container { position: relative; height: 280px; }

/* Macro */
.macro-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    gap: 16px;
    margin-top: 16px;
}
.macro-box {
    background: var(--card);
    border: 1px solid var(--border);
    border-radius: 12px;
    padding: 16px;
}
.macro-box h4 { font-size: 13px; color: var(--text-secondary); margin-bottom: 8px; }
.macro-chart { height: 150px; }

/* Tables */
.tables-section { margin-bottom: 24px; }
.data-table {
    background: var(--card);
    border: 1px solid var(--border);
    border-radius: 12px;
    padding: 16px;
    margin-bottom: 16px;
    overflow-x: auto;
}
.data-table h4 {
    font-size: 13px;
    color: var(--text-secondary);
    margin-bottom: 12px;
}
table { width: 100%; border-collapse: collapse; font-family: 'JetBrains Mono', monospace; font-size: 11px; }
th { text-align: right; padding: 6px 10px; font-weight: 600; color: var(--text-muted); border-bottom: 1px solid var(--border); font-size: 10px; }
th:first-child { text-align: left; }
td { text-align: right; padding: 6px 10px; color: var(--text-secondary); border-bottom: 1px solid rgba(30,41,59,0.5); }
td:first-child { text-align: left; color: var(--text-muted); }
td.up { color: var(--green); }
td.down { color: var(--red); }
tr:hover td { background: rgba(56,189,248,0.03); }

/* Footer */
footer {
    text-align: center;
    padding: 20px 0;
    color: var(--text-muted);
    font-size: 11px;
    border-top: 1px solid var(--border);
}

/* Countdown */
.countdown {
    position: fixed;
    bottom: 16px; right: 16px;
    background: var(--card);
    border: 1px solid var(--border);
    padding: 6px 14px;
    border-radius: 20px;
    font-family: 'JetBrains Mono', monospace;
    font-size: 11px;
    color: var(--text-muted);
}

@media (max-width: 768px) {
    .realtime-section { grid-template-columns: 1fr; }
    .card-metrics { grid-template-columns: repeat(4, 1fr); }
    .charts-grid { grid-template-columns: 1fr; }
}
</style>
</head>
<body>
<div class="container">

<header>
    <h1>镍 · 不锈钢 <span class="live-badge"><span class="dot"></span>LIVE</span></h1>
    <div class="update-time">2026-02-04 14:37:15</div>
</header>

<div class="realtime-section">

        <div class="realtime-card up">
            <div class="card-header">
                <div>
                    <div class="card-name">沪镍主力</div>
                    <div class="card-code">NIZL.SHF</div>
                </div>
                <div class="card-price-wrap">
                    <div class="price">136,800</div>
                    <div class="change up">▲ +1,400 (+1.46%)</div>
                </div>
            </div>
            <div class="card-metrics">
                <div class="metric"><span class="label">开盘</span><span class="value">135,400</span></div>
                <div class="metric"><span class="label">最高</span><span class="value up">137,770</span></div>
                <div class="metric"><span class="label">最低</span><span class="value down">134,500</span></div>
                <div class="metric"><span class="label">振幅</span><span class="value">2.42%</span></div>
                <div class="metric"><span class="label">成交</span><span class="value">458,061</span></div>
                <div class="metric"><span class="label">金额</span><span class="value">622.4亿</span></div>
                <div class="metric"><span class="label">持仓</span><span class="value">101,493</span></div>
                <div class="metric"><span class="label">时间</span><span class="value" style="font-size:10px">14:37:15</span></div>
            </div>
        </div>

        <div class="realtime-card up">
            <div class="card-header">
                <div>
                    <div class="card-name">不锈钢主力</div>
                    <div class="card-code">SSZL.SHF</div>
                </div>
                <div class="card-price-wrap">
                    <div class="price">13,790</div>
                    <div class="change up">▲ +170 (+1.51%)</div>
                </div>
            </div>
            <div class="card-metrics">
                <div class="metric"><span class="label">开盘</span><span class="value">13,620</span></div>
                <div class="metric"><span class="label">最高</span><span class="value up">13,870</span></div>
                <div class="metric"><span class="label">最低</span><span class="value down">13,580</span></div>
                <div class="metric"><span class="label">振幅</span><span class="value">2.13%</span></div>
                <div class="metric"><span class="label">成交</span><span class="value">220,265</span></div>
                <div class="metric"><span class="label">金额</span><span class="value">151.0亿</span></div>
                <div class="metric"><span class="label">持仓</span><span class="value">59,983</span></div>
                <div class="metric"><span class="label">时间</span><span class="value" style="font-size:10px">14:37:15</span></div>
            </div>
        </div>

</div>

<div class="alerts-section">
    <h3>⚡ 实时预警</h3>
    <div class="no-alerts">暂无预警</div>
</div>

<div class="charts-section">
    <div class="section-title">历史走势 · 近60个交易日</div>
    <div class="charts-grid">
        <div class="chart-box">
            <h4>沪镍主力</h4>
            <div class="chart-container"><canvas id="chart_ni"></canvas></div>
        </div>
        <div class="chart-box">
            <h4>不锈钢主力</h4>
            <div class="chart-container"><canvas id="chart_ss"></canvas></div>
        </div>
    </div>

    <div class="section-title" style="margin-top:24px">宏观指标</div>
    <div class="macro-grid">
        <div class="macro-box">
            <h4>沪镍连续</h4>
            <div class="macro-chart"><canvas id="macro_沪镍连续"></canvas></div>
        </div>
    </div>
</div>

<div class="tables-section">
    <div class="section-title">数据明细</div>
    
        <div class="data-table">
            <h4>沪镍主力 近期数据</h4>
            <table>
                <thead>
                    <tr><th>日期</th><th>开盘</th><th>最高</th><th>最低</th><th>收盘</th><th>涨跌</th><th>成交量</th><th>持仓</th></tr>
                </thead>
                <tbody>

                    <tr>
                        <td>2026-02-03</td>
                        <td>132,640</td>
                        <td>135,500</td>
                        <td>130,010</td>
                        <td class="down">134,830</td>
                        <td class="down">-1.25%</td>
                        <td>663,364</td>
                        <td>101,500</td>
                    </tr>
                    <tr>
                        <td>2026-02-02</td>
                        <td>138,000</td>
                        <td>141,100</td>
                        <td>129,650</td>
                        <td class="down">129,650</td>
                        <td class="down">-11.00%</td>
                        <td>808,140</td>
                        <td>110,945</td>
                    </tr>
                    <tr>
                        <td>2026-01-30</td>
                        <td>149,300</td>
                        <td>151,050</td>
                        <td>139,260</td>
                        <td class="down">140,000</td>
                        <td class="down">-3.94%</td>
                        <td>1,012,443</td>
                        <td>132,448</td>
                    </tr>
                    <tr>
                        <td>2026-01-29</td>
                        <td>145,240</td>
                        <td>149,930</td>
                        <td>143,500</td>
                        <td class="up">147,470</td>
                        <td class="up">+1.79%</td>
                        <td>783,275</td>
                        <td>136,553</td>
                    </tr>
                    <tr>
                        <td>2026-01-28</td>
                        <td>147,100</td>
                        <td>148,080</td>
                        <td>141,890</td>
                        <td class="down">144,370</td>
                        <td class="down">-1.31%</td>
                        <td>404,592</td>
                        <td>27,881</td>
                    </tr>
                    <tr>
                        <td>2026-01-27</td>
                        <td>147,980</td>
                        <td>148,350</td>
                        <td>144,140</td>
                        <td class="down">146,110</td>
                        <td class="down">-1.87%</td>
                        <td>523,396</td>
                        <td>40,119</td>
                    </tr>
                    <tr>
                        <td>2026-01-26</td>
                        <td>149,880</td>
                        <td>152,300</td>
                        <td>145,310</td>
                        <td class="up">145,380</td>
                        <td class="up">+0.25%</td>
                        <td>730,480</td>
                        <td>59,283</td>
                    </tr>
                    <tr>
                        <td>2026-01-23</td>
                        <td>141,850</td>
                        <td>150,000</td>
                        <td>140,850</td>
                        <td class="up">148,010</td>
                        <td class="up">+3.99%</td>
                        <td>752,840</td>
                        <td>68,596</td>
                    </tr>
                    <tr>
                        <td>2026-01-22</td>
                        <td>143,140</td>
                        <td>143,760</td>
                        <td>140,410</td>
                        <td class="up">142,500</td>
                        <td class="up">+1.15%</td>
                        <td>588,698</td>
                        <td>69,610</td>
                    </tr>
                    <tr>
                        <td>2026-01-21</td>
                        <td>142,600</td>
                        <td>144,100</td>
                        <td>137,680</td>
                        <td class="up">143,060</td>
                        <td class="up">+0.39%</td>
                        <td>745,668</td>
                        <td>75,892</td>
                    </tr>
                </tbody>
            </table>
        </div>

        <div class="data-table">
            <h4>不锈钢主力 近期数据</h4>
            <table>
                <thead>
                    <tr><th>日期</th><th>开盘</th><th>最高</th><th>最低</th><th>收盘</th><th>涨跌</th><th>成交量</th><th>持仓</th></tr>
                </thead>
                <tbody>

                    <tr>
                        <td>2026-02-03</td>
                        <td>13,520</td>
                        <td>13,650</td>
                        <td>13,500</td>
                        <td class="down">13,585</td>
                        <td class="down">-1.77%</td>
                        <td>219,431</td>
                        <td>67,925</td>
                    </tr>
                    <tr>
                        <td>2026-02-02</td>
                        <td>14,100</td>
                        <td>14,115</td>
                        <td>13,420</td>
                        <td class="down">13,420</td>
                        <td class="down">-7.03%</td>
                        <td>360,562</td>
                        <td>83,445</td>
                    </tr>
                    <tr>
                        <td>2026-01-30</td>
                        <td>14,615</td>
                        <td>14,720</td>
                        <td>14,110</td>
                        <td class="down">14,140</td>
                        <td class="down">-2.45%</td>
                        <td>408,041</td>
                        <td>99,011</td>
                    </tr>
                    <tr>
                        <td>2026-01-29</td>
                        <td>14,500</td>
                        <td>14,705</td>
                        <td>14,370</td>
                        <td class="up">14,585</td>
                        <td class="up">+1.25%</td>
                        <td>295,945</td>
                        <td>113,676</td>
                    </tr>
                    <tr>
                        <td>2026-01-28</td>
                        <td>14,580</td>
                        <td>14,595</td>
                        <td>14,260</td>
                        <td class="down">14,465</td>
                        <td class="down">-1.13%</td>
                        <td>312,567</td>
                        <td>123,373</td>
                    </tr>
                    <tr>
                        <td>2026-01-27</td>
                        <td>14,725</td>
                        <td>14,825</td>
                        <td>14,415</td>
                        <td class="down">14,540</td>
                        <td class="down">-1.26%</td>
                        <td>328,930</td>
                        <td>137,091</td>
                    </tr>
                    <tr>
                        <td>2026-01-26</td>
                        <td>14,715</td>
                        <td>14,955</td>
                        <td>14,610</td>
                        <td class="down">14,645</td>
                        <td class="down">-0.14%</td>
                        <td>365,984</td>
                        <td>155,289</td>
                    </tr>
                    <tr>
                        <td>2026-01-23</td>
                        <td>14,615</td>
                        <td>14,880</td>
                        <td>14,480</td>
                        <td class="up">14,725</td>
                        <td class="up">+0.00%</td>
                        <td>347,129</td>
                        <td>162,125</td>
                    </tr>
                    <tr>
                        <td>2026-01-22</td>
                        <td>14,750</td>
                        <td>14,940</td>
                        <td>14,555</td>
                        <td class="up">14,650</td>
                        <td class="up">+1.17%</td>
                        <td>389,457</td>
                        <td>163,858</td>
                    </tr>
                    <tr>
                        <td>2026-01-21</td>
                        <td>14,410</td>
                        <td>14,895</td>
                        <td>14,185</td>
                        <td class="up">14,720</td>
                        <td class="up">+2.40%</td>
                        <td>426,916</td>
                        <td>160,354</td>
                    </tr>
                </tbody>
            </table>
        </div>

</div>

<footer>
    镍/不锈钢研究系统 · 每30秒自动刷新 · 数据来源: 同花顺iFinD
</footer>

</div>

<div class="countdown" id="countdown">30s</div>

<script>
// 图表默认样式
Chart.defaults.color = '#64748b';
Chart.defaults.borderColor = 'rgba(30,41,59,0.5)';
Chart.defaults.font.family = "'JetBrains Mono', monospace";
Chart.defaults.font.size = 10;

// 数据
const chartData = {};
const macroData = {};


chartData['ni'] = {
    name: '沪镍主力',
    dates: ["2025-11-10", "2025-11-11", "2025-11-12", "2025-11-13", "2025-11-14", "2025-11-17", "2025-11-18", "2025-11-19", "2025-11-20", "2025-11-21", "2025-11-24", "2025-11-25", "2025-11-26", "2025-11-27", "2025-11-28", "2025-12-01", "2025-12-02", "2025-12-03", "2025-12-04", "2025-12-05", "2025-12-08", "2025-12-09", "2025-12-10", "2025-12-11", "2025-12-12", "2025-12-15", "2025-12-16", "2025-12-17", "2025-12-18", "2025-12-19", "2025-12-22", "2025-12-23", "2025-12-24", "2025-12-25", "2025-12-26", "2025-12-29", "2025-12-30", "2025-12-31", "2026-01-05", "2026-01-06", "2026-01-07", "2026-01-08", "2026-01-09", "2026-01-12", "2026-01-13", "2026-01-14", "2026-01-15", "2026-01-16", "2026-01-19", "2026-01-20", "2026-01-21", "2026-01-22", "2026-01-23", "2026-01-26", "2026-01-27", "2026-01-28", "2026-01-29", "2026-01-30", "2026-02-02", "2026-02-03"],
    closes: [119680, 119380, 118710, 118930, 117080, 116750, 114840, 115650, 115380, 114050, 115530, 116160, 117260, 116900, 117080, 117850, 118050, 117870, 117760, 117790, 118030, 117350, 117090, 115870, 115590, 114690, 112290, 113800, 113940, 117180, 121260, 123440, 128000, 125410, 126750, 125710, 132390, 132850, 134100, 139800, 147720, 136440, 139090, 144200, 138450, 140940, 146750, 141350, 142320, 141360, 143060, 142500, 148010, 145380, 146110, 144370, 147470, 140000, 129650, 134830],
    volumes: [82864, 69912, 98248, 80848, 118721, 102915, 117416, 82563, 124692, 138203, 148534, 116438, 176566, 97221, 85929, 145829, 88522, 112448, 103322, 107217, 124513, 102410, 120019, 106815, 100436, 129996, 157287, 139596, 97677, 210637, 196376, 386986, 1095331, 650804, 616999, 785240, 1000602, 1141527, 366893, 738334, 1132256, 1520564, 1121426, 1083202, 1277690, 1070694, 1738133, 1325220, 949372, 695146, 745668, 588698, 752840, 730480, 523396, 404592, 783275, 1012443, 808140, 663364],
    ma5: [119680.0, 119530.0, 119256.7, 119175.0, 118756.0, 118170.0, 117262.0, 116650.0, 115940.0, 115334.0, 115090.0, 115354.0, 115676.0, 115980.0, 116586.0, 117050.0, 117428.0, 117550.0, 117722.0, 117864.0, 117900.0, 117760.0, 117604.0, 117226.0, 116786.0, 116118.0, 115106.0, 114448.0, 114062.0, 114380.0, 115694.0, 117924.0, 120764.0, 123058.0, 124972.0, 125862.0, 127652.0, 128622.0, 130360.0, 132970.0, 137372.0, 138182.0, 139430.0, 141450.0, 141180.0, 139824.0, 141886.0, 142338.0, 141962.0, 142544.0, 142968.0, 142118.0, 143450.0, 144062.0, 145012.0, 145274.0, 146268.0, 144666.0, 141520.0, 139264.0],
    ma10: [null, null, null, null, 118756.0, 118421.7, 117910.0, 117627.5, 117377.8, 117045.0, 116630.0, 116308.0, 116163.0, 115960.0, 115960.0, 116070.0, 116391.0, 116613.0, 116851.0, 117225.0, 117475.0, 117594.0, 117577.0, 117474.0, 117325.0, 117009.0, 116433.0, 116026.0, 115644.0, 115583.0, 115906.0, 116515.0, 117606.0, 118560.0, 119676.0, 120778.0, 122788.0, 124693.0, 126709.0, 128971.0, 131617.0, 132917.0, 134026.0, 135905.0, 137075.0, 138598.0, 140034.0, 140884.0, 141706.0, 141862.0, 141396.0, 142002.0, 142894.0, 143012.0, 143778.0, 144121.0, 144193.0, 144058.0, 142791.0, 142138.0],
    ma20: [null, null, null, null, null, null, null, null, null, 117045.0, 116907.3, 116845.0, 116876.9, 116878.6, 116892.0, 116951.9, 117016.5, 117063.9, 117100.5, 117135.0, 117052.5, 116951.0, 116870.0, 116717.0, 116642.5, 116539.5, 116412.0, 116319.5, 116247.5, 116404.0, 116690.5, 117054.5, 117591.5, 118017.0, 118500.5, 118893.5, 119610.5, 120359.5, 121176.5, 122277.0, 123761.5, 124716.0, 125816.0, 127232.5, 128375.5, 129688.0, 131411.0, 132788.5, 134207.5, 135416.5, 136506.5, 137459.5, 138460.0, 139458.5, 140426.5, 141359.5, 142113.5, 142471.0, 142248.5, 142000.0],
    volColors: ["rgba(100,116,139,0.4)", "rgba(239,68,68,0.4)", "rgba(239,68,68,0.4)", "rgba(34,197,94,0.4)", "rgba(239,68,68,0.4)", "rgba(239,68,68,0.4)", "rgba(239,68,68,0.4)", "rgba(34,197,94,0.4)", "rgba(239,68,68,0.4)", "rgba(239,68,68,0.4)", "rgba(34,197,94,0.4)", "rgba(34,197,94,0.4)", "rgba(34,197,94,0.4)", "rgba(239,68,68,0.4)", "rgba(34,197,94,0.4)", "rgba(34,197,94,0.4)", "rgba(34,197,94,0.4)", "rgba(239,68,68,0.4)", "rgba(239,68,68,0.4)", "rgba(34,197,94,0.4)", "rgba(34,197,94,0.4)", "rgba(239,68,68,0.4)", "rgba(239,68,68,0.4)", "rgba(239,68,68,0.4)", "rgba(239,68,68,0.4)", "rgba(239,68,68,0.4)", "rgba(239,68,68,0.4)", "rgba(34,197,94,0.4)", "rgba(34,197,94,0.4)", "rgba(34,197,94,0.4)", "rgba(34,197,94,0.4)", "rgba(34,197,94,0.4)", "rgba(34,197,94,0.4)", "rgba(239,68,68,0.4)", "rgba(34,197,94,0.4)", "rgba(239,68,68,0.4)", "rgba(34,197,94,0.4)", "rgba(34,197,94,0.4)", "rgba(34,197,94,0.4)", "rgba(34,197,94,0.4)", "rgba(34,197,94,0.4)", "rgba(239,68,68,0.4)", "rgba(34,197,94,0.4)", "rgba(34,197,94,0.4)", "rgba(239,68,68,0.4)", "rgba(34,197,94,0.4)", "rgba(34,197,94,0.4)", "rgba(239,68,68,0.4)", "rgba(34,197,94,0.4)", "rgba(239,68,68,0.4)", "rgba(34,197,94,0.4)", "rgba(239,68,68,0.4)", "rgba(34,197,94,0.4)", "rgba(239,68,68,0.4)", "rgba(34,197,94,0.4)", "rgba(239,68,68,0.4)", "rgba(34,197,94,0.4)", "rgba(239,68,68,0.4)", "rgba(239,68,68,0.4)", "rgba(34,197,94,0.4)"]
};

chartData['ss'] = {
    name: '不锈钢主力',
    dates: ["2025-11-10", "2025-11-11", "2025-11-12", "2025-11-13", "2025-11-14", "2025-11-17", "2025-11-18", "2025-11-19", "2025-11-20", "2025-11-21", "2025-11-24", "2025-11-25", "2025-11-26", "2025-11-27", "2025-11-28", "2025-12-01", "2025-12-02", "2025-12-03", "2025-12-04", "2025-12-05", "2025-12-08", "2025-12-09", "2025-12-10", "2025-12-11", "2025-12-12", "2025-12-15", "2025-12-16", "2025-12-17", "2025-12-18", "2025-12-19", "2025-12-22", "2025-12-23", "2025-12-24", "2025-12-25", "2025-12-26", "2025-12-29", "2025-12-30", "2025-12-31", "2026-01-05", "2026-01-06", "2026-01-07", "2026-01-08", "2026-01-09", "2026-01-12", "2026-01-13", "2026-01-14", "2026-01-15", "2026-01-16", "2026-01-19", "2026-01-20", "2026-01-21", "2026-01-22", "2026-01-23", "2026-01-26", "2026-01-27", "2026-01-28", "2026-01-29", "2026-01-30", "2026-02-02", "2026-02-03"],
    closes: [12605, 12465, 12425, 12475, 12380, 12415, 12365, 12335, 12285, 12290, 12335, 12405, 12455, 12410, 12365, 12445, 12465, 12465, 12425, 12500, 12510, 12500, 12555, 12500, 12565, 12480, 12320, 12380, 12420, 12720, 12850, 12905, 13075, 12990, 12955, 12910, 13090, 13125, 13075, 13395, 13885, 13675, 13860, 13855, 13790, 13925, 14415, 14275, 14305, 14345, 14720, 14650, 14725, 14645, 14540, 14465, 14585, 14140, 13420, 13585],
    volumes: [100514, 108314, 43270, 118571, 119652, 137113, 92400, 88679, 119724, 178634, 147594, 150286, 151599, 126697, 123220, 163599, 95108, 80361, 84742, 109509, 101640, 69080, 79931, 69415, 120808, 177564, 210658, 143017, 101495, 276896, 169487, 168990, 244883, 163852, 129760, 169875, 181552, 145530, 85130, 137101, 195560, 424667, 300830, 256679, 256128, 214016, 489832, 369728, 287688, 296762, 426916, 389457, 347129, 365984, 328930, 312567, 295945, 408041, 360562, 219431],
    ma5: [12605.0, 12535.0, 12498.3, 12492.5, 12470.0, 12432.0, 12412.0, 12394.0, 12356.0, 12338.0, 12322.0, 12330.0, 12354.0, 12379.0, 12394.0, 12416.0, 12428.0, 12430.0, 12433.0, 12460.0, 12473.0, 12480.0, 12498.0, 12513.0, 12526.0, 12520.0, 12484.0, 12449.0, 12433.0, 12464.0, 12538.0, 12655.0, 12794.0, 12908.0, 12955.0, 12967.0, 13004.0, 13014.0, 13031.0, 13119.0, 13314.0, 13431.0, 13578.0, 13734.0, 13813.0, 13821.0, 13969.0, 14052.0, 14142.0, 14253.0, 14412.0, 14459.0, 14549.0, 14617.0, 14656.0, 14605.0, 14592.0, 14475.0, 14230.0, 14039.0],
    ma10: [null, null, null, null, 12470.0, 12460.8, 12447.1, 12433.1, 12416.7, 12404.0, 12377.0, 12371.0, 12374.0, 12367.5, 12366.0, 12369.0, 12379.0, 12392.0, 12406.0, 12427.0, 12444.5, 12454.0, 12464.0, 12473.0, 12493.0, 12496.5, 12482.0, 12473.5, 12473.0, 12495.0, 12529.0, 12569.5, 12621.5, 12670.5, 12709.5, 12752.5, 12829.5, 12904.0, 12969.5, 13037.0, 13140.5, 13217.5, 13296.0, 13382.5, 13466.0, 13567.5, 13700.0, 13815.0, 13938.0, 14033.0, 14116.5, 14214.0, 14300.5, 14379.5, 14454.5, 14508.5, 14525.5, 14512.0, 14423.5, 14347.5],
    ma20: [null, null, null, null, null, null, null, null, null, 12404.0, 12397.7, 12398.3, 12402.7, 12403.2, 12400.7, 12403.4, 12407.1, 12410.3, 12411.1, 12415.5, 12410.8, 12412.5, 12419.0, 12420.2, 12429.5, 12432.8, 12430.5, 12432.8, 12439.5, 12461.0, 12486.8, 12511.8, 12542.8, 12571.8, 12601.2, 12624.5, 12655.8, 12688.8, 12721.2, 12766.0, 12834.8, 12893.5, 12958.8, 13026.5, 13087.8, 13160.0, 13264.8, 13359.5, 13453.8, 13535.0, 13628.5, 13715.8, 13798.2, 13881.0, 13960.2, 14038.0, 14112.8, 14163.5, 14180.8, 14190.2],
    volColors: ["rgba(100,116,139,0.4)", "rgba(239,68,68,0.4)", "rgba(239,68,68,0.4)", "rgba(34,197,94,0.4)", "rgba(239,68,68,0.4)", "rgba(34,197,94,0.4)", "rgba(239,68,68,0.4)", "rgba(239,68,68,0.4)", "rgba(239,68,68,0.4)", "rgba(34,197,94,0.4)", "rgba(34,197,94,0.4)", "rgba(34,197,94,0.4)", "rgba(34,197,94,0.4)", "rgba(239,68,68,0.4)", "rgba(239,68,68,0.4)", "rgba(34,197,94,0.4)", "rgba(34,197,94,0.4)", "rgba(34,197,94,0.4)", "rgba(239,68,68,0.4)", "rgba(34,197,94,0.4)", "rgba(34,197,94,0.4)", "rgba(239,68,68,0.4)", "rgba(34,197,94,0.4)", "rgba(239,68,68,0.4)", "rgba(34,197,94,0.4)", "rgba(239,68,68,0.4)", "rgba(239,68,68,0.4)", "rgba(34,197,94,0.4)", "rgba(34,197,94,0.4)", "rgba(34,197,94,0.4)", "rgba(34,197,94,0.4)", "rgba(34,197,94,0.4)", "rgba(34,197,94,0.4)", "rgba(239,68,68,0.4)", "rgba(239,68,68,0.4)", "rgba(239,68,68,0.4)", "rgba(34,197,94,0.4)", "rgba(34,197,94,0.4)", "rgba(239,68,68,0.4)", "rgba(34,197,94,0.4)", "rgba(34,197,94,0.4)", "rgba(239,68,68,0.4)", "rgba(34,197,94,0.4)", "rgba(239,68,68,0.4)", "rgba(239,68,68,0.4)", "rgba(34,197,94,0.4)", "rgba(34,197,94,0.4)", "rgba(239,68,68,0.4)", "rgba(34,197,94,0.4)", "rgba(34,197,94,0.4)", "rgba(34,197,94,0.4)", "rgba(239,68,68,0.4)", "rgba(34,197,94,0.4)", "rgba(239,68,68,0.4)", "rgba(239,68,68,0.4)", "rgba(239,68,68,0.4)", "rgba(34,197,94,0.4)", "rgba(239,68,68,0.4)", "rgba(239,68,68,0.4)", "rgba(34,197,94,0.4)"]
};


macroData['沪镍连续'] = {
    name: '沪镍连续',
    dates: ["2025-10-09", "2025-10-10", "2025-10-13", "2025-10-14", "2025-10-15", "2025-10-16", "2025-10-17", "2025-10-20", "2025-10-21", "2025-10-22", "2025-10-23", "2025-10-24", "2025-10-27", "2025-10-28", "2025-10-29", "2025-10-30", "2025-10-31", "2025-11-03", "2025-11-04", "2025-11-05", "2025-11-06", "2025-11-07", "2025-11-10", "2025-11-11", "2025-11-12", "2025-11-13", "2025-11-14", "2025-11-17", "2025-11-18", "2025-11-19", "2025-11-20", "2025-11-21", "2025-11-24", "2025-11-25", "2025-11-26", "2025-11-27", "2025-11-28", "2025-12-01", "2025-12-02", "2025-12-03", "2025-12-04", "2025-12-05", "2025-12-08", "2025-12-09", "2025-12-10", "2025-12-11", "2025-12-12", "2025-12-15", "2025-12-16", "2025-12-17", "2025-12-18", "2025-12-19", "2025-12-22", "2025-12-23", "2025-12-24", "2025-12-25", "2025-12-26", "2025-12-29", "2025-12-30", "2025-12-31", "2026-01-05", "2026-01-06", "2026-01-07", "2026-01-08", "2026-01-09", "2026-01-12", "2026-01-13", "2026-01-14", "2026-01-15", "2026-01-16", "2026-01-19", "2026-01-20", "2026-01-21", "2026-01-22", "2026-01-23", "2026-01-26", "2026-01-27", "2026-01-28", "2026-01-29", "2026-01-30", "2026-02-02", "2026-02-03"],
    values: [124260, 121980, 121150, 120490, 121010, 121270, 121160, 120710, 121180, 121120, 121150, 121860, 122060, 120300, 121250, 120660, 120290, 120590, 119390, 119720, 119480, 119140, 119160, 119050, 118300, 118500, 117240, 116650, 114840, 115650, 115250, 113890, 115320, 115940, 117030, 116710, 116730, 117460, 117700, 117600, 117340, 117450, 117730, 116900, 116150, 115400, 115550, 114350, 112290, 113800, 113940, 117180, 121260, 123040, 127650, 124980, 126440, 125310, 132080, 130400, 133750, 139410, 147400, 136000, 138000, 141800, 140200, 141800, 145400, 141350, 142320, 141360, 143060, 142500, 148010, 145380, 146110, 144370, 146990, 139910, 129500, 134120]
};


// 绘制主图
function drawMainChart(canvasId, data) {
    if (!data) return;
    const ctx = document.getElementById(canvasId).getContext('2d');
    new Chart(ctx, {
        data: {
            labels: data.dates,
            datasets: [
                {
                    type: 'line',
                    label: '收盘价',
                    data: data.closes,
                    borderColor: '#38bdf8',
                    backgroundColor: 'rgba(56,189,248,0.05)',
                    borderWidth: 2,
                    pointRadius: 0,
                    fill: true,
                    tension: 0.1,
                    yAxisID: 'y'
                },
                {
                    type: 'line',
                    label: 'MA5',
                    data: data.ma5,
                    borderColor: '#f59e0b',
                    borderWidth: 1,
                    pointRadius: 0,
                    tension: 0.3,
                    yAxisID: 'y'
                },
                {
                    type: 'line',
                    label: 'MA10',
                    data: data.ma10,
                    borderColor: '#a78bfa',
                    borderWidth: 1,
                    pointRadius: 0,
                    tension: 0.3,
                    yAxisID: 'y'
                },
                {
                    type: 'line',
                    label: 'MA20',
                    data: data.ma20,
                    borderColor: '#f472b6',
                    borderWidth: 1,
                    borderDash: [4,2],
                    pointRadius: 0,
                    tension: 0.3,
                    yAxisID: 'y'
                },
                {
                    type: 'bar',
                    label: '成交量',
                    data: data.volumes,
                    backgroundColor: data.volColors,
                    yAxisID: 'y1',
                    barPercentage: 0.6
                }
            ]
        },
        options: {
            responsive: true,
            maintainAspectRatio: false,
            interaction: { mode: 'index', intersect: false },
            plugins: {
                legend: { display: true, position: 'top', labels: { usePointStyle: true, pointStyle: 'line', padding: 12, font: { size: 10 } } }
            },
            scales: {
                x: { ticks: { maxTicksLimit: 8 }, grid: { display: false } },
                y: { position: 'left', grid: { color: 'rgba(30,41,59,0.3)' }, ticks: { callback: v => v.toLocaleString() } },
                y1: { position: 'right', grid: { display: false }, ticks: { callback: v => (v/10000).toFixed(0)+'万' } }
            }
        }
    });
}

// 绘制宏观图
function drawMacroChart(canvasId, data) {
    if (!data) return;
    const ctx = document.getElementById(canvasId).getContext('2d');
    new Chart(ctx, {
        type: 'line',
        data: {
            labels: data.dates,
            datasets: [{
                label: data.name,
                data: data.values,
                borderColor: '#a78bfa',
                backgroundColor: 'rgba(167,139,250,0.1)',
                borderWidth: 2,
                pointRadius: 0,
                fill: true,
                tension: 0.2
            }]
        },
        options: {
            responsive: true,
            maintainAspectRatio: false,
            plugins: { legend: { display: false } },
            scales: {
                x: { ticks: { maxTicksLimit: 5 }, grid: { display: false } },
                y: { ticks: { callback: v => v.toLocaleString() }, grid: { color: 'rgba(30,41,59,0.3)' } }
            }
        }
    });
}

// 初始化图表
if (chartData['ni']) drawMainChart('chart_ni', chartData['ni']);
if (chartData['ss']) drawMainChart('chart_ss', chartData['ss']);
if (macroData['沪镍连续']) drawMacroChart('macro_沪镍连续', macroData['沪镍连续']);

// 倒计时
let sec = 30;
setInterval(() => {
    sec--;
    if (sec <= 0) sec = 30;
    document.getElementById('countdown').textContent = sec + 's';
}, 1000);
</script>
</body>
</html>